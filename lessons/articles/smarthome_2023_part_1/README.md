### Умный дом, понятие экосистемы    

:arrow_right: [Вернуться к оглавлению](https://github.com/kvazis/training/tree/master/lessons/articles/articles)    

*Умный дом* - это совокупность устройств и логики, которая описывает то, как они будут взаимодействовать друг с другом. Условно это понятие можно разделить на две составляющие - физическую и логическую.     
Устройства умного дома (физическая составляющая) имеют особенность, которая отличает их от обычных гаджетов - это интерфейс, который нужен для отправки и получения команд к и от центра управления (логической составляющей). Наиболее распространенные интерфейсы в бюджетных, так сказать квартирных, умных домах (именно о них этот пост) - это zigbee, bluetooth (ble, mesh) z-wave, wi-fi, ethernet. Для общения между собой они используют сеть IPv4 - центром которой служит домашний роутер, раздавая адреса типа 192.0.1.35. У роутера, обычно есть два интерфейса - проводной ethernet и беспроводной - wi-fi (2,4, 5 Ггц в этом контексте это неважно). Соответственно, если у умного устройства есть wi-fi и или ethernet - то оно получает от роутера свой IP адрес и может взаимодействовать с центром управления. Для тех устройств, которые оснащены zigbee, Bluetooth mesh и т.д. - для попадания в общую сеть нужен посредник, который имеет несколько интерфейсов - эту роль выполняют шлюзы. С одной стороны у них есть тот самый Zigbee (Bluetooth, BLE etc), с другой стороны - wi-fi и или ethernet который получает IP адрес домашней сети и работает с центром управления умным домом.    
Центры управления умным домом - могут располагаться где-то далеко, в облаке - так работают всеми известные системы типа mihome, aqara home, tuya, ewelink и т.п., поэтому связь с ними устанавливается через Интернет канал. А могут располагаться дома, на вашем личном сервере, в качестве которого может выступать одноплатник типа raspberry pi, orange, banana, или мини ПК типа Beelink на процессоре Intel или даже мощное сетевое хранилище (NAS) у которого достаточно ресурсов для этого. Так работает Home Assistant, Domoticz и т.п. Им, соответственно интернет не нужен, но они также работают через общую, транспортную сеть роутера IPv4.    
Логика работы такова, что в подавляющем большинстве случаев (есть некоторые исключения вроде прямого биндинга) - все взаимодействие осуществляется именно через центр управления умным домом. Например - по датчику движения включается свет. При этом - ни датчик движения ни светильник не подозревают о существовании друг друга, это им не нужно. Датчик движения просто отправляет события (есть движение, движения нет) в центр управления, а дальше лично ему глубоко все равно, что с ними будет дальше. Центр управления, получив эти события - в зависимости от настройки логики (автоматизаций) - анализирует все условия - движение есть, светильник выключен, значит отправляем ему команду включится. Светильник, получив эту команду - включается, при этом ему все равно, что ее вызвало - датчик движения, кнопка выключателя, запуск вручную и т.п. По такому принципу - работают все устройства, это ответ на вопрос - можно связать гаджет 1, с гаджетом 2. Связка идет на уровне автоматизации созданной в центре управления, сами устройства не подозревают о существовании друг друга.    
Еще один важный момент. Если у вас есть zigbee шлюз, то это совершенно не значит, что вы теперь можете работать со всеми zigbee устройствами. На физическом уровне - шлюз может увидеть например датчик открытия, но чтобы с ним работать - он должен знать, что это именно датчик открытия, какие он шлет события и т.п. А у кого шлюз может спросить? Только у своего центра управления. И если это облако Tuya, то оно конечно не знает о том, как работать с датчиком Aqara, а Aqara не умеет работать с шторами Sonoff. С альтернативными системами - типа zigbee2mqtt, ситуация лучше, так как там нет ограничений на гаджеты одной экосистемы, там работает и tuya и aqara и ewelink.    
*Экосистема* - это совокупность умных устройств, которыми может управлять определенный центр управления умным домом. Если инструкции о том, как именно взаимодействовать с тем или иным устройством есть в центре управления, значит оно совместимо с данной экосистемой.    

____
#### Поддержать развитие проекта *Умный дом с Alex Kvazis*    
<a href="https://www.youtube.com/channel/UCcq9onYHbs6go3kDpfBoqhg/join" target="_blank"><img src="https://raw.githubusercontent.com/kvazis/training/master/lessons/img/youtube.png" alt="Youtube Sponsorship" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>
<a href="https://www.patreon.com/alex_kvazis" target="_blank"><img src="https://raw.githubusercontent.com/kvazis/training/master/lessons/img/patreon-button.png" alt="Patreon Support" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>
<a href="https://www.buymeacoffee.com/greatkvazis" target="_blank"><img src="https://raw.githubusercontent.com/kvazis/training/master/lessons/img/buymeacoffee.png" alt="Buy Me A Coffee" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>
<a href="https://www.paypal.com/paypalme/greatkvazis" target="_blank"><img src="https://raw.githubusercontent.com/kvazis/training/master/lessons/img/paypal.png" alt="PayPal Me" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>

#### Или перевод любой суммы на -     
* Webmoney - Z243592584952
* BTC - 1Gzr7WQugfnPuWVawu47EiCMTDUBqCAshj
* ETH - 0xa0ce3E29Cf537013649Ae9cdbc08C4853fF91FAc
* LTC - ltc1qs493yk2wk9ywx5h6aruk4p9zm75hx42ekv4ym2
* TRX - TFTCLqvS1tMBwokRHBwz1TCDJ4oD1Z5zPk